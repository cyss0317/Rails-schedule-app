<div class="min-h-screen bg-gray-50">
  <!-- Page header -->
  <header class="sticky top-0 z-10 bg-white border-b">
    <div class="mx-auto max-w-7xl px-4 py-3 flex items-center justify-between">
      <h1 class="text-xl font-semibold tracking-tight"><%= current_user.full_name %>'s Schedules</h1>

        <%= render partial: "shared/icons/hamburger", locals: { current: "month" } %>
    </div>
  </header>

  <!-- Main -->
  <div class="mx-auto max-w-7xl px-4 py-6 md:grid md:grid-cols-12 md:gap-6">
    <!-- Sidebar: Companies -->
    <aside class="md:col-span-4 lg:col-span-3 md:sticky md:top-[64px] md:self-start">
      <div id="company-drawer" class="bg-white rounded-2xl border shadow-sm md:shadow-none">
        <!-- Search -->
        <!-- 
        <div class="p-3 border-b">
          <label class="sr-only" for="company-search">Search companies</label>
          <input id="company-search" type="search" placeholder="Search companies..."
                 class="w-full rounded-xl border px-3 py-2 outline-none focus:ring"
          />
        </div>
        -->

     <!-- Company list -->
      <% @companies.each do |company| %>
        <nav aria-label="Companies" class="max-h-[70vh] md:max-h-[calc(100vh-220px)] overflow-auto">
          <% is_current = (company.id == @company&.id) %>

          <div class="flex items-center justify-between px-4 py-3 border-b 
                      <%= is_current ? 'bg-indigo-600 text-white' : 'hover:bg-indigo-50 hover:text-indigo-700' %>">

            <%= link_to company_locations_path(company), class: "flex flex-col flex-1" do %>
              <span class="font-medium <%= is_current ? 'text-white' : 'hover:bg-indigo-50 hover:text-indigo-700' %>"><%= company.name %></span>
              <span class="text-sm <%= is_current ? 'text-indigo-200' : 'text-gray-500' %>">
                <%= company.locations.length %> locations
              </span>
            <% end %>

            <% if current_user.admin_user? %>
              <%= link_to "Edit", edit_company_path(company),
                  class: "text-sm #{is_current ? 'text-indigo-200 hover:text-white' : 'text-indigo-600 hover:text-indigo-800 underline'}" %>
            <% end %>
          </div>
        </nav>
      <% end %>

        <!-- Sidebar footer actions -->
        <% if current_user.admin_user? %>
          <div class="p-3 flex items-center gap-2">
            <%= link_to "Create Company", new_company_path, class: "w-full inline-flex justify-center rounded-xl bg-indigo-600 text-white px-3 py-2 hover:bg-indigo-700" %>
          </div>
        <% end %>
      </div>
    </aside>

    <!-- Content: Locations for selected company -->
    <section class="mt-6 md:mt-0 md:col-span-8 lg:col-span-9">
      <!-- Section header -->
      <div class="flex flex-wrap items-center justify-between gap-3">
        <div>
          <h2 class="text-lg font-semibold">Cricket1 Locations</h2>
          <p class="text-sm text-gray-500">Showing <%= @locations.length %> of <%= @locations.length %> locations</p>
        </div>
        <div class="flex items-center gap-2">
          <!-- Search function
          <input type="search" placeholder="Search locationsâ€¦" class="rounded-xl border px-3 py-2">
          <select class="rounded-xl border px-3 py-2">
            <option value="">All cities</option>
            <option>Austin</option>
            <option>Cedar Park</option>
          </select>
          -->
          <%= link_to "Create a Location", new_company_location_path(@company), class: "inline-flex items-center rounded-xl bg-indigo-600 text-white px-4 py-2 hover:bg-indigo-700 shadow" if current_user.admin_user?%>
        </div>
      </div>

      <!-- Locations grid (cards) -->
      <div class="mt-4 grid gap-4 sm:grid-cols-2 xl:grid-cols-3">
        <!-- Location card -->
        <div class="flex flex-col align-items-center gap-3">
        <% @locations.each do |location| %>
          <article class="rounded-2xl border bg-white p-4 shadow-sm">
            <header class="flex items-start justify-between">
              <div>
                <h3 class="font-semibold"><%= location.name %></h3>
                <p class="text-sm text-gray-500"><%= location.full_address %></p>
              </div>
              <span class="text-xs rounded-full bg-green-100 text-green-700 px-2 py-0.5">Active</span>
            </header>
            <div class="flex items-start justify-between">
              <dl class="mt-3 grid grid-cols-2 gap-2 text-sm">
                <% if current_user.admin_user? %>
                <!-- 
                  <div> <%= link_to "Employees",location_location_users_path(location), class: "text-gray-500 hover:bg-gray-50" %><dd class="font-medium"><%= location.location_users.length %></dd></div>
                -->
                  <div> <%= content_tag :div, "Employees", class: "text-gray-500 hover:bg-gray-50" %><dd class="font-medium"><%= location.location_users.length %></dd></div>
                <% else %>
                  <div> <%= content_tag :div, "Employees", class: "text-gray-500 hover:bg-gray-50" %><dd class="font-medium"><%= location.location_users.length %></dd></div>
                <% end %>
              </dl>
            </div>
            <div class="mt-4 flex items-center gap-2">
              <%= link_to "Show Schedules", weekly_location_meetings_path(location_id: location.id), class: "rounded-lg border px-3 py-1.5 hover:bg-gray-50" %>
              <%= link_to "Edit", edit_location_path(location, company_id: params[:company_id]), class: "rounded-lg border px-3 py-1.5 hover:bg-gray-50" if current_user.admin_user? %>
            </div>
          </article>
        <% end %>
      </div>

      </div>

      <!-- Empty state (show if none) -->
    <% if @locations.empty? %>
      <div class="mt-8 rounded-2xl border bg-white p-8 text-center">
        <p class="text-gray-600">No locations yet.</p>
      </div>
    <% end %>


      <!-- Pagination -->

      <!--
      <div class="mt-6 flex items-center justify-between">
        <p class="text-sm text-gray-500">Page 1 of 3</p>
        <div class="flex gap-2">
          <button class="rounded-lg border px-3 py-1.5 disabled:opacity-50" disabled>Prev</button>
          <button class="rounded-lg border px-3 py-1.5">Next</button>
        </div>
      </div>
      -->
    </section>
  </div>
</div>