<div class="m-10 sm:mx-auto sm:w-full sm:max-w-sm">
  <%=form_for(@location, as: "location", url: method == :post ? company_locations_path : location_path, html: { id: "location_form", method: method }) do |f| %>
    <%= render partial: "shared/text_field", locals: { form: f, label: "Name" , field: "name"  } %>
    <%= render partial: "shared/text_field", locals: { form: f, label: "Street Address" , field: "street_address"  } %>
    <%= render partial: "shared/text_field", locals: { form: f, label: "Building Number" , field: "building_number"  } %>
    <%= render partial: "shared/text_field", locals: { form: f, label: "City" , field: "city"  } %>
    <%= render partial: "shared/text_field", locals: { form: f, label: "State" , field: "state"  } %>
    <%= render partial: "shared/text_field", locals: { form: f, label: "Zip Code" , field: "zip_code"  } %>
    <%= render partial: "shared/text_field", locals: { form: f, label: "Phone Number" , field: "phone_number"  } %>
    <%= f.hidden_field :company_id, value: @location&.company&.id || params[:company_id] %>
  <% end %>
  <div class="mt-6 flex justify-center items-center gap-4">
    <%= button_tag method == :post ? "Create" : "Update",
          type: "submit",
          form: "location_form",
          class: "bg-indigo-600 text-white px-3 py-2 rounded-xl shadow" %>

    <%= link_to "Cancel",
          session.delete(:return_to) || request.referer,
          class: "text-indigo-600 hover:text-indigo-700 px-3 py-2" %>
 
    <% if method == :patch %>
      <%= button_to "Delete",
        location_path(@location),
        method: :delete,
        # form: { data: { turbo: true, turbo_confirm: "Are you sure you want to delete this company?" } },
        data: { turbo_confirm: "Are you sure you want to delete this location?" },
      class: "bg-red-500 text-white px-3 py-2 rounded-xl" %>
    <% end %>
  </div>
</div>